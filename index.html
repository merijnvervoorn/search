<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>COMMAND_INTERFACE // MERIJN</title>
<meta name="description" content="Personal command interface and dashboard for Merijn.">
<link rel="shortcut icon" type="image/png" href="https://merijnvervoorn.com/static/shape/bc-cir.png"/>

<!-- PERFORMANCE: Preload main background -->
<link rel="preload" as="image" href="space-bg.webp">

<style>
    /* --- CORE VARIABLES --- */
    :root {
        --neon-orange: #F58A07;
        --neon-red: #bc0031;
        --neon-purple: #928DF7;
        --neon-green: #39ff14;
        --bg-glass: rgba(0, 0, 0, 0.75);
        --border-glass: rgba(255, 255, 255, 0.2);
    }

    /* --- BASE SETTINGS --- */
    body {
        margin: 0;
        padding: 0;
        height: 100vh;
        width: 100vw;
        overflow: hidden;
        background-color: #000;
        
        /* NEW: Dual Layer Parallax Background */
        background-image: url('space-bg.webp'), url('space-bg.gif'); 
        background-repeat: repeat, repeat;
        
        /* ZOOMED IN: Layer 1 (Near) is large, Layer 2 (Far) is smaller */
        background-size: 800px 800px, 400px 400px; 
        
        background-position: 0 0, 0 0;
        /* Blend mode makes the stars look dense */
        background-blend-mode: lighten;
        
        font-family: 'Courier New', Courier, monospace;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        will-change: background-position;

        /* Transform for !barrel command */
        transition: transform 1s ease-in-out;
    }

    /* CRT Scanline Effect Overlay */
    body::after {
        content: "";
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        background-size: 100% 2px, 3px 100%;
        pointer-events: none;
        z-index: 999;
    }

    /* --- MATRIX MODE --- */
    #matrixCanvas {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        z-index: 1;
        display: none;
        pointer-events: none;
    }
    body.matrix-mode {
        background-image: none !important;
        background-color: #000 !important;
    }
    body.matrix-mode #matrixCanvas { display: block; }

    /* --- STEALTH MODE --- */
    body.stealth-mode .core-system,
    body.stealth-mode .station,
    body.stealth-mode .satellite-dock,
    body.stealth-mode .hud-logo {
        opacity: 0;
        pointer-events: none;
        transition: opacity 1.5s ease-in-out;
    }

    /* --- MODAL STYLES --- */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.85); z-index: 2000;
        display: none; justify-content: center; align-items: center;
        backdrop-filter: blur(5px);
    }
    .modal-content {
        background: #111; border: 1px solid #444; width: 500px; max-width: 90%;
        padding: 30px; position: relative; box-shadow: 0 0 30px rgba(0,0,0,0.9);
        color: #e0e0f0; font-family: 'Courier New', monospace; text-align: left;
    }
    .modal-close {
        position: absolute; top: 10px; right: 15px; cursor: pointer; font-size: 1.5rem; color: #666;
    }
    .modal-close:hover { color: #fff; }
    .cmd-list { margin-top: 15px; border-top: 1px solid #333; padding-top: 15px; }
    .cmd-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem; }
    .cmd-code { color: var(--neon-green); font-weight: bold; }
    .secret-code { color: var(--neon-purple); font-weight: bold; }
    .modal-link {
        display: block; margin-top: 20px; color: #888; text-align: center; font-size: 0.8rem;
        text-decoration: none; border: 1px dashed #444; padding: 10px;
    }
    .modal-link:hover { color: #fff; border-color: #fff; }

    /* --- HUD LOGO --- */
    .hud-logo {
        position: absolute;
        top: 30px;
        left: 30px;
        z-index: 1001;
        width: 65px;
        height: auto;
        opacity: 0.8;
        transition: 0.3s all ease-in-out;
        filter: drop-shadow(0 0 8px rgba(245, 138, 7, 0.6));
    }
    .hud-logo img { width: 100%; height: auto; display: block; }
    .hud-logo:hover { opacity: 1; filter: drop-shadow(0 0 15px rgba(245, 138, 7, 1)); transform: scale(1.05); }

    /* --- THE CENTRAL CORE (Search) --- */
    .core-system {
        position: relative;
        z-index: 10;
        width: 400px;
        text-align: center;
        contain: layout style; /* Tells browser this element is stable */
        content-visibility: visible;
    }

    .core-circle {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        border: 2px solid rgba(255,255,255,0.1);
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        z-index: -1;
        animation: spin 20s linear infinite;
        box-shadow: 0 0 50px rgba(255, 255, 255, 0.05);
    }
    .core-circle::before {
        content: ''; position: absolute; top: -5px; left: 50%; width: 10px; height: 10px; background: #fff; border-radius: 50%; box-shadow: 0 0 10px #fff;
    }
    @keyframes spin { 100% { transform: translate(-50%, -50%) rotate(360deg); } }

    .clock {
        font-size: 3rem;
        font-weight: bold;
        text-shadow: 0 0 15px rgba(255,255,255,0.8);
        margin-bottom: 5px;
    }

    .location {
        font-size: 0.75rem;
        color: var(--neon-green);
        letter-spacing: 3px;
        margin-bottom: 20px;
        text-shadow: 0 0 5px rgba(57, 255, 20, 0.6);
        opacity: 0.8;
        font-weight: bold;
    }

    /* --- SEARCH INPUT BASE STATE (Single Line) --- */
    .search-input {
        background: rgba(0,0,0,0.5);
        border: 1px solid var(--border-glass);
        border-radius: 20px;
        padding: 12px 20px;
        color: var(--neon-green);
        font-family: inherit;
        font-size: 1.1rem;
        box-sizing: border-box;
        text-align: center;
        outline: none;
        backdrop-filter: blur(5px);
        resize: none; 
        line-height: 1.5;
        display: block;

        /* --- NEW/MODIFIED PROPERTIES --- */
        width: 100%; /* Start at 100% of the 400px container */
        height: 50px; /* Fixed height for exactly one line + padding */
        overflow: hidden; /* Hide overflow initially */
        
        /* THE SMOOTH TRANSITION MAGIC */
        /* We transition width, height, margins, and borders */
        transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    /* Focus Glow */
    .search-input:focus {
        border-color: var(--neon-green);
        box-shadow: 0 0 15px rgba(57, 255, 20, 0.3);
    }

    /* --- EXPANDED STATE (Triggered by JS) --- */
    .search-input.expanded {
        /* Height: Approx 4 lines (around 140-150px based on line-height) */
        height: 140px; 
        
        /* Width: 30% wider than base */
        width: 130%;
        
        /* Centering Trick: Because it's wider than its parent, 
        we shift it left by half the increased amount to keep it centered. 
        (130% - 100%) / 2 = 15% shift. */
        margin-left: -15%;
        
        /* Enable scrollbar only when in expanded state */
        overflow-y: auto; 
        
        /* Optional: enhance glow when expanded */
        box-shadow: 0 0 25px rgba(57, 255, 20, 0.4);
    }

    /* Custom Scrollbar styling (only visible in expanded state) */
    .search-input::-webkit-scrollbar { width: 8px; }
    .search-input::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); border-radius: 10px; }
    .search-input::-webkit-scrollbar-thumb { background: rgba(57, 255, 20, 0.3); border-radius: 10px; }
    .search-input::-webkit-scrollbar-thumb:hover { background: rgba(57, 255, 20, 0.6); }

    /* --- THE GHOST (Hidden Measurement Tool) --- */
    .search-ghost {
        position: absolute;
        visibility: hidden; /* Invisible */
        pointer-events: none;
        
        /* Match .search-input styling EXACTLY for accurate measurement */
        width: 100%; /* Always stays at container width (400px) */
        padding: 12px 20px;
        font-family: 'Courier New', Courier, monospace;
        font-size: 1.1rem;
        line-height: 1.5;
        box-sizing: border-box;
        border: 1px solid transparent; /* Match border width of input */
        white-space: pre-wrap; /* Mimic textarea wrapping */
        word-wrap: break-word;
        top: 0; left: 0; z-index: -100;
    }

    .cmd-hint {
        margin-top: 15px;
        font-size: 0.85rem;
        color: #666; /* Keep original gray */
        letter-spacing: 2px;
        font-weight: bold;
        opacity: 0.9;
        cursor: pointer;
        transition: 0.2s;
    }
    .cmd-hint:hover { color: #888; text-decoration: underline; text-decoration-style: dotted; }

    /* --- THE ORBITAL STATIONS --- */
    .station {
        position: absolute;
        background: var(--bg-glass);
        border: 1px solid var(--border-glass);
        backdrop-filter: blur(10px);
        padding: 15px;
        border-radius: 15px;
        width: 60px; /* Collapsed Width */
        height: 60px; /* Collapsed Height */
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: 5;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .station-icon {
        font-size: 1.8rem;
        margin-bottom: 10px;
        min-height: 40px;
        display: flex; align-items: center; justify-content: center;
        width: 100%;
    }

    .station-icon img {
        width: 55px;
        height: 55px;
        object-fit: contain;
        filter: drop-shadow(0 0 5px currentColor);
        transition: transform 0.3s;
    }

    .station-content {
        opacity: 0;
        width: 240px;
        transition: 0.2s;
        pointer-events: none;
        display: flex;
        flex-direction: column;
        gap: 8px;
        text-align: center;
    }
    
    .station h3 {
        margin: 0 0 10px 0;
        font-size: 0.9rem;
        text-transform: uppercase;
        border-bottom: 1px solid rgba(255,255,255,0.2);
        padding-bottom: 5px;
        width: 100%;
        white-space: nowrap;
    }

    .header-link { text-decoration: none; color: inherit; transition: 0.2s; display: block; width: 100%; }
    .header-link:hover { text-shadow: 0 0 10px currentColor; letter-spacing: 1px; }

    .station:hover {
        width: 270px;
        height: auto;
        min-height: 200px;
        z-index: 20;
        box-shadow: 0 0 30px rgba(0,0,0,0.8);
    }
    .station:hover .station-content { opacity: 1; pointer-events: auto; }
    
    .station:hover .station-icon img {
        transform: rotate(15deg) scale(1.1);
    }

    /* Flip Red & Purple Planets */
    #st-east .station-icon img,
    #st-south .station-icon img {
        transform: scaleX(-1);
    }
    #st-east:hover .station-icon img,
    #st-south:hover .station-icon img {
        transform: scaleX(-1) rotate(15deg) scale(1.1);
    }

    /* --- LINKS STYLING --- */
    .link-btn {
        display: block;
        text-decoration: none;
        color: #ccc;
        font-size: 0.85rem;
        padding: 6px;
        border: 1px solid transparent;
        transition: 0.2s;
        background: rgba(255,255,255,0.05);
    }
    .link-btn:hover { background: #fff; color: #000; font-weight: bold; transform: translateX(5px); }

    .sub-header {
        font-size: 0.7rem;
        color: #aaa;
        text-transform: uppercase;
        margin-top: 5px;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 5px;
    }

    .tz-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
    .split-row { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }

    .tz-btn {
        background: rgba(0,0,0,0.5);
        border: 1px solid #555;
        color: #fff;
        text-decoration: none;
        font-size: 0.7rem;
        padding: 5px 0;
        transition: 0.2s;
        border-radius: 3px;
    }
    .tz-btn:hover { background: var(--neon-green); color: #000; border-color: var(--neon-green); font-weight: bold; }

    /* --- POSITIONS --- */
    #st-north {
        top: 5%; left: 50%; transform: translateX(-50%);
        border-color: var(--neon-green); box-shadow: 0 0 10px rgba(57, 255, 20, 0.2); color: var(--neon-green);
    }
    #st-north:hover { box-shadow: 0 0 20px var(--neon-green); }

    #st-west {
        left: 8%; top: 50%; transform: translateY(-50%);
        border-color: var(--neon-orange); box-shadow: 0 0 10px rgba(245, 138, 7, 0.2); color: var(--neon-orange);
    }
    #st-west:hover { box-shadow: 0 0 20px var(--neon-orange); }

    #st-east {
        right: 8%; top: 50%; transform: translateY(-50%);
        border-color: var(--neon-red); box-shadow: 0 0 10px rgba(188, 0, 49, 0.2); color: var(--neon-red);
    }
    #st-east:hover { box-shadow: 0 0 20px var(--neon-red); }

    #st-south {
        bottom: 5%; left: 50%; transform: translateX(-50%);
        border-color: var(--neon-purple); box-shadow: 0 0 10px rgba(146, 141, 247, 0.2); transform-origin: bottom center; color: var(--neon-purple);
    }
    #st-south:hover { box-shadow: 0 0 20px var(--neon-purple); transform: translateX(-50%) translateY(-20px); }

    /* --- SATELLITES --- */
    .satellite {
        position: absolute;
        width: 80px; height: 80px; 
        display: flex; align-items: center; justify-content: center;
        text-decoration: none;
        color: #888;
        transition: 0.3s, opacity 0.5s;
        z-index: 8;
        animation: float 6s ease-in-out infinite;
    }
    .satellite img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        filter: drop-shadow(0 0 5px rgba(0,0,0,0.8));
    }
    .satellite:hover { 
        transform: scale(1.2); 
        filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
    }
    
    #sat-yt { top: 20%; left: 28%; border-color: #ff0000; color: #ff0000; animation: float-yt 5.5s ease-in-out infinite; } 
    #sat-nf { top: 35%; right: 25%; border-color: #E50914; color: #E50914; animation: float-nf 7s ease-in-out infinite; } 
    #sat-gh { bottom: 29%; right: 30%; border-color: #fff; color: #fff; font-size: 1.4rem; animation: float-gh 6.2s ease-in-out infinite; }
    #sat-ir { bottom: 24%; left: 24%; border-color: #50a2ff; color: #50a2ff; animation: float-ir 8s ease-in-out infinite; }

    @keyframes float-yt {
        0% { transform: translateY(0px) translateX(0px); }
        50% { transform: translateY(-18px) translateX(12px); }
        100% { transform: translateY(0px) translateX(0px); }
    }
    @keyframes float-nf {
        0% { transform: translateY(0px) translateX(0px); }
        50% { transform: translateY(-12px) translateX(-15px); }
        100% { transform: translateY(0px) translateX(0px); }
    }
    @keyframes float-gh {
        0% { transform: translateY(0px) translateX(0px); }
        50% { transform: translateY(-20px) translateX(8px); }
        100% { transform: translateY(0px) translateX(0px); }
    }
    @keyframes float-ir {
        0% { transform: translateY(0px) translateX(0px); }
        50% { transform: translateY(-10px) translateX(-18px); }
        100% { transform: translateY(0px) translateX(0px); }
    }

    .station, .hud-logo {
        content-visibility: auto;
        contain-intrinsic-size: 60px 60px; /* Prevents layout shift */
    }

    /* MOBILE OPTIMIZATION */
    @media (max-width: 800px) {
        body {
            flex-direction: column;
            justify-content: flex-start;
            overflow-y: auto;
            overflow-x: hidden;
            height: auto;
            min-height: 100vh;
            padding-bottom: 50px;
            background-position: center !important; /* Disable JS parallax on mobile */
        }

        .hud-logo { display: none; }
        .core-system { margin-bottom: 50px; margin-top: 50px; width: 90%; }
        .core-circle { display: none; }
        .clock { font-size: 2.5rem; }

        .station {
            position: relative; top: auto !important; left: auto !important; right: auto !important; bottom: auto !important; transform: none !important;
            width: 85%; height: auto; min-height: 0; margin-bottom: 25px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        .station-icon { display: none; }
        .station-content { opacity: 1; width: 100%; pointer-events: auto; }
        .link-btn { padding: 10px; font-size: 1rem; margin-bottom: 5px; }

        .satellite-dock {
            display: flex; justify-content: center; width: 100%; flex-wrap: wrap;
        }
        .satellite {
            position: relative; display: inline-flex; top: auto !important; left: auto !important; right: auto !important; bottom: auto !important; margin: 10px; width: 80px; height: 80px; font-size: 1.2rem;
        }
    }

</style>
</head>
<body>
    <main>
    <!-- Matrix Rain Canvas (Hidden by default) -->
    <canvas id="matrixCanvas"></canvas>

    <!-- COMMANDS MODAL -->
    <div class="modal-overlay" id="cmdModal" onclick="closeCmdModal(event)">
        <div class="modal-content">
            <span class="modal-close" onclick="document.getElementById('cmdModal').style.display='none'">&times;</span>
            <h2 style="margin-top:0; color:#fff; text-transform:uppercase; border-bottom:2px solid #333; padding-bottom:10px;">System Protocols</h2>
            
            <div class="cmd-list">
                <div style="color:#888; margin-bottom:10px; font-size:0.8rem;">// STANDARD BANGS</div>
                <div class="cmd-row"><span class="cmd-code">!g</span> <span>Google Search</span></div>
                <div class="cmd-row"><span class="cmd-code">!gpt or !chat</span> <span>Ask ChatGPT</span></div>
                <div class="cmd-row"><span class="cmd-code">!gem</span> <span>Ask Gemini</span></div>
                <div class="cmd-row"><span class="cmd-code">!r</span> <span>Search Reddit (via DuckDuckGo)</span></div>
                <div class="cmd-row"><span class="cmd-code">!m</span> <span>Go to Merijn.cc</span></div>
            </div>

            <div class="cmd-list">
                <div style="color:#888; margin-bottom:10px; font-size:0.8rem;">// SECRET OVERRIDES</div>
                <div class="cmd-row"><span class="secret-code">!warp</span> <span>Engage Hyperdrive</span></div>
                <div class="cmd-row"><span class="secret-code">!matrix</span> <span>Hack System</span></div>
                <div class="cmd-row"><span class="secret-code">!barrel</span> <span>Do a Barrel Roll</span></div>
                <div class="cmd-row"><span class="secret-code">!stealth</span> <span>Hide UI</span></div>
                <div class="cmd-row"><span class="secret-code">!reset</span> <span>System Reboot</span></div>
            </div>

            <a href="https://duckduckgo.com/bangs" target="_blank" class="modal-link">VIEW ALL 13,500+ DUCKDUCKGO BANGS</a>
        </div>
    </div>

    <a href="https://merijnvervoorn.com" class="hud-logo">
        <img src="logo-anaerobic.webp" alt="Merijn Logo" width="65" height="65" loading="lazy" decoding="async">
    </a>

    <div class="core-system">
        <div class="core-circle"></div>
        <div class="clock" id="clock">00:00</div>
        <!-- AUTO LOCATION -->
        <div class="location" id="location-display">LOC: ACQUIRING SIGNAL...</div>
        <form id="searchForm" name="unduck" role="search" action="https://unduck.link" method="GET">
            <textarea id="searchInput" class="search-input" name="q" placeholder="INITIATE..." rows="1" autofocus></textarea>
            <script>document.getElementById('searchInput').focus();</script>
        </form>
        <!-- CLICKABLE CMD HINT -->
        <div class="cmd-hint" onclick="openCmdModal()">CMD: !g, !gpt, !gem, !r, !m</div>
    </div>

    <!-- NORTH STATION -->
    <div class="station" id="st-north">
        <div class="station-icon">
            <img src="planet-green.webp" alt="Resistance" width="55" height="55" loading="lazy" decoding="async">
        </div>
        <div class="station-content">
            <h3>RESISTANCE</h3>
            <a href="https://annas-archive.org/" class="link-btn">Book Archive</a>
            <a href="https://archive.org/" class="link-btn">Internet Archive</a>
            <a href="https://oa.mg/" class="link-btn">OA.MG Research</a>
            <a href="https://en.wikipedia.org/wiki/List_of_cognitive_biases" class="link-btn">List of Biases</a>
            
            <div class="sub-header">TRACKING</div>
            <div class="split-row">
                <a href="https://www.goodreads.com/" class="link-btn">Books</a>
                <a href="https://letterboxd.com/" class="link-btn">Films</a>
            </div>
            
            <div class="sub-header">TWILIGHT ZONE</div>
            <div class="tz-grid">
                <a href="https://archive.org/details/the-twilight-zone-1959-s-01-e-00-original-pilot/" class="tz-btn" title="Season 1">S1</a>
                <a href="https://archive.org/details/the-twilight-zone-1959-s-02-e-11-the-night-of-the-meek" class="tz-btn" title="Season 2">S2</a>
                <a href="https://archive.org/details/the-twilight-zone-1959-s-03-e-15-a-quality-of-mercy" class="tz-btn" title="Season 3">S3</a>
                <a href="https://archive.org/details/the-twilight-zone-1959-s-04-e-16-on-thursday-we-leave-for-home" class="tz-btn" title="Season 4">S4</a>
                <a href="https://archive.org/details/the-twilight-zone-1959-s-05-e-22-an-occurrence-at-owl-creek-bridge" class="tz-btn" title="Season 5">S5</a>
            </div>
        </div>
    </div>

    <!-- WEST STATION -->
    <div class="station" id="st-west">
        <div class="station-icon">
            <img src="planet-orange.webp" alt="Merijn" width="55" height="55" loading="lazy" decoding="async">
        </div>
        <div class="station-content">
            <h3><a href="https://merijnvervoorn.com" class="header-link">MERIJN</a></h3>
            
            <a href="https://mail.proton.me/u/0/inbox" class="link-btn">Proton Mail</a>
            <a href="https://calendar.proton.me/" class="link-btn">Calendar</a>
            <a href="https://nas.merijnvervoorn.com" class="link-btn">NAS Drive</a>
            <a href="https://hpanel.hostinger.com/" class="link-btn">Hostinger</a>
            <a href="https://eu.umami.is/dashboard" class="link-btn">Umami Stats</a>
        </div>
    </div>

    <!-- EAST STATION -->
    <div class="station" id="st-east">
        <div class="station-icon">
            <img src="planet-red.webp" alt="School" width="55" height="55" loading="lazy" decoding="async">
        </div>
        <div class="station-content">
            <h3>SCHOOL</h3>
            <a href="https://login.canvas.uva.nl" class="link-btn">Canvas</a>
            <a href="https://www.overleaf.com/project" class="link-btn">Overleaf</a>
            <a href="https://drive.google.com/drive/u/1/my-drive" class="link-btn">Google Drive</a>
            <a href="https://www.office.com/apps" class="link-btn">Office</a>
            <a href="https://uva.eu.qualtrics.com" class="link-btn">Qualtrics</a>
            <a href="https://scholar.google.com/" class="link-btn">Google Scholar</a>
        </div>
    </div>

    <!-- SOUTH STATION -->
    <div class="station" id="st-south">
        <div class="station-icon">
            <img src="planet-purple.webp" alt="Work" width="55" height="55" loading="lazy" decoding="async">
        </div>
        <div class="station-content">
            <h3><a href="https://justprepare.nl" class="header-link">WORK</a></h3>
            <a href="https://justprepare.nl" class="link-btn">Just Prepare</a>
            <a href="https://notion.so" class="link-btn">Notion</a>
            <a href="https://outlook.office.com/mail/" class="link-btn">Outlook Work</a>
            <a href="https://flp.sap.uva.nl/fiori" class="link-btn">Zelfbediening</a>
        </div>
    </div>

    <!-- SATELLITES -->
    <div class="satellite-dock">
        <a href="https://www.youtube.com/feed/subscriptions" class="satellite" id="sat-yt" title="Subs Only">
            <img src="satellite-yt.webp" alt="YT" width="80" height="80" loading="lazy" decoding="async">
        </a>
        <a href="https://www.netflix.com/browse/my-list" class="satellite" id="sat-nf" title="My List">
            <img src="satellite-netflix.webp" alt="Netflix" width="80" height="80" loading="lazy" decoding="async">
        </a>
        <a href="https://github.com/merijnvervoorn" class="satellite" id="sat-gh" title="GitHub">
            <img src="satellite-github.webp" alt="GitHub" width="80" height="80" loading="lazy" decoding="async">
        </a>
        <a href="https://www.inoreader.com/all_articles" class="satellite" id="sat-ir" title="Inoreader">
            <img src="satellite-inoreader.webp" alt="Inoreader" width="80" height="80" loading="lazy" decoding="async">
        </a>
    </div>

    <script>
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
        }
        setInterval(updateClock, 1000);
        updateClock();

        /* --- AUTO LOCATION SCRIPT --- */
        async function fetchLocation() {
            const locElement = document.getElementById('location-display');
            try {
                const response = await fetch('https://get.geojs.io/v1/ip/geo.json');
                const data = await response.json();
                
                if (data.city && data.country_code) {
                    locElement.innerText = `LOC: ${data.city.toUpperCase()}, ${data.country_code}`;
                } else {
                    locElement.innerText = 'LOC: UNKNOWN SECTOR';
                }
            } catch (error) {
                locElement.innerText = 'LOC: SIGNAL LOST';
            }
        }

        // Wait until the page is 100% loaded, then wait another 0.5 seconds
        window.addEventListener('load', () => {
            setTimeout(() => {
                fetchLocation();
            }, 500); 
        });

        /* --- COCKPIT PHYSICS SCRIPT --- */
        const state = {
            x: 0, y: 0,
            vx: 0, vy: 0,
            keys: {}
        };

        const driftSpeedX = 0.15; 
        const driftSpeedY = -0.05; 

        window.addEventListener('keydown', e => { 
            if (document.body.classList.contains('stealth-mode')) {
                document.body.classList.remove('stealth-mode');
                return;
            }
            state.keys[e.key] = true; 
        });
        window.addEventListener('keyup', e => { state.keys[e.key] = false; });

        /* SMART FOCUS HANDLER */
        document.getElementById('searchInput').addEventListener('keydown', function(e) {
            if (this.value === '' && ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                e.preventDefault();
                this.blur();
                state.keys[e.key] = true;
            }
        });

        function gameLoop() {
            if (document.activeElement.id !== 'searchInput') {
                const acc = 0.5;
                if (state.keys.ArrowLeft) state.vx += acc;
                if (state.keys.ArrowRight) state.vx -= acc;
                if (state.keys.ArrowUp) state.vy += acc;
                if (state.keys.ArrowDown) state.vy -= acc;
            }

            state.vx *= 0.95;
            state.vy *= 0.95;

            state.x += state.vx + driftSpeedX;
            state.y += state.vy + driftSpeedY;

            document.body.style.backgroundPosition = 
                `${state.x}px ${state.y}px, ${state.x * 0.4}px ${state.y * 0.4}px`;

            requestAnimationFrame(gameLoop);
        }
        window.addEventListener('load', () => {
            setTimeout(() => {
                gameLoop();
            }, 1500);
        });

        /* --- AUTO-EXPAND STATE SWITCHER LOGIC (GHOST METHOD) --- */
        const searchInput = document.getElementById('searchInput');
        const expansionThreshold = 52; // Threshold for single line height

        // 1. Create the Ghost Element in the DOM
        const ghost = document.createElement('div');
        ghost.classList.add('search-ghost');
        // Append it to the .core-system container so it shares the same width context
        document.querySelector('.core-system').appendChild(ghost);

        function checkExpansionState() {
            // 2. Sync Ghost content with Input content
            // We add a zero-width space to ensure trailing newlines are calculated
            const text = searchInput.value;
            ghost.textContent = text; 
            
            // 3. Measure the GHOST, not the Input
            // The ghost never changes width, so it won't flicker
            if (ghost.scrollHeight > expansionThreshold) {
                searchInput.classList.add('expanded');
            } else {
                searchInput.classList.remove('expanded');
            }
        }

        // Attach listener
        searchInput.addEventListener('input', checkExpansionState, false);

        // Handle Enter Key
        searchInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault(); 
                const event = new Event('submit', { cancelable: true });
                document.getElementById('searchForm').dispatchEvent(event);
            }
        });

        // Initial check
        window.addEventListener('load', () => {
            checkExpansionState();
        });

        /* --- MATRIX RAIN FUNCTION --- */
        function startMatrix() {
            const canvas = document.getElementById('matrixCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()*&^%';
            const fontSize = 16;
            const columns = canvas.width / fontSize;
            const drops = [];

            for (let x = 0; x < columns; x++) {
                drops[x] = 1;
            }

            function drawMatrix() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = '#39ff14';
                ctx.font = fontSize + 'px monospace';

                for (let i = 0; i < drops.length; i++) {
                    const text = letters.charAt(Math.floor(Math.random() * letters.length));
                    ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                    if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                        drops[i] = 0;
                    }
                    drops[i]++;
                }
                if(document.body.classList.contains('matrix-mode')) {
                    requestAnimationFrame(drawMatrix);
                }
            }
            drawMatrix();
        }

        /* --- MODAL LOGIC --- */
        function openCmdModal() {
            document.getElementById('cmdModal').style.display = 'flex';
        }
        
        function closeCmdModal(e) {
            if (e.target.id === 'cmdModal' || e.target.className === 'modal-close') {
                document.getElementById('cmdModal').style.display = 'none';
            }
        }

        /* --- SEARCH LOGIC & SECRET COMMANDS --- */
        let currentRotation = 0;

        document.getElementById('searchForm').addEventListener('submit', function(event) {
            var queryInput = document.getElementById('searchInput');
            var query = queryInput.value.trim().toLowerCase(); 

            // SECRET COMMANDS
            if (query === '!warp') {
                event.preventDefault();
                state.vx = 100;
                state.vy = 100;
                queryInput.value = "HYPERDRIVE ENGAGED...";
                setTimeout(() => { queryInput.value = ""; }, 2000);
                return;
            }

            if (query === '!matrix') {
                event.preventDefault();
                document.body.classList.add('matrix-mode');
                document.documentElement.style.setProperty('--neon-orange', '#39ff14');
                document.documentElement.style.setProperty('--neon-red', '#39ff14');
                document.documentElement.style.setProperty('--neon-purple', '#39ff14');
                document.documentElement.style.setProperty('--neon-green', '#39ff14');
                queryInput.value = "SYSTEM HACKED.";
                startMatrix();
                setTimeout(() => { queryInput.value = ""; }, 2000);
                return;
            }

            if (query === '!barrel') {
                event.preventDefault();
                currentRotation += 360; // Continuous rotation
                document.body.style.transform = `rotate(${currentRotation}deg)`;
                queryInput.value = "";
                return;
            }

            if (query === '!stealth') {
                event.preventDefault();
                document.body.classList.add('stealth-mode');
                queryInput.value = "";
                return;
            }
            
            if (query === '!reset') {
                event.preventDefault();
                location.reload();
                return;
            }

            // STANDARD SEARCH COMMANDS
            var originalQuery = queryInput.value.trim();
            
            if (originalQuery.includes('!gpt')) {
                event.preventDefault();
                window.location.href = `https://chat.openai.com/?q=${encodeURIComponent(originalQuery.replace('!gpt', '').trim())}`;
            } else if (originalQuery.includes('!chat')) {
                event.preventDefault();
                window.location.href = `https://chat.openai.com/?q=${encodeURIComponent(originalQuery.replace('!chat', '').trim())}`;
            } else if (originalQuery.includes('!gem')) {
                event.preventDefault();
                window.location.href = `https://www.google.com/search?udm=50&source=searchlabs&q=${encodeURIComponent(originalQuery.replace('!gem', '').trim())}`;
            } else if (originalQuery.includes('!g')) {
                event.preventDefault();
                window.location.href = `https://www.google.com/search?q=${encodeURIComponent(originalQuery.replace('!g', '').trim())}`;
            } else if (originalQuery.includes('!r')) {
                event.preventDefault();
                window.location.href = `https://duckduckgo.com/?q=${encodeURIComponent(originalQuery.replace('!r', '').trim())}+site%3Areddit.com`;
            } else if (originalQuery.includes('!m')) {
                event.preventDefault();
                window.location.href = `https://www.merijn.cc/${encodeURIComponent(originalQuery.replace('!m', '').trim())}`;
            } else if (originalQuery.includes('https://') || originalQuery.includes('http://')) {
                event.preventDefault();
                window.location.href = originalQuery.split(' ')[0];
            } else if (originalQuery.includes('.') && !originalQuery.includes(' ')) {
                event.preventDefault();
                window.location.href = 'https://' + originalQuery;
            } else {
                this.action = 'https://duckduckgo.com/';
            }
        });
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js');
            });
        }
    </script>
    </main>
</body>
</html>